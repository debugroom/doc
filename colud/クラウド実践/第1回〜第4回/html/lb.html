<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <title>LBイメージセットアップ手順書 &mdash; クラウド実践演習 0 documentation</title>

    <link rel="stylesheet" href="_static/default.css" type="text/css"/>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css"/>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT: '',
            VERSION: '0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE: true
        };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="クラウド実践演習 0 documentation" href="index.html"/>
    <link rel="next" title="Mailイメージセットアップ手順書" href="mail.html"/>
    <link rel="prev" title="Deployイメージセットアップ手順書" href="deploy.html"/>
</head>
<body>
<div class="related">
    <h3>Navigation</h3>
    <ul>
        <li class="right" style="margin-right: 10px">
            <a href="genindex.html" title="General Index"
               accesskey="I">index</a></li>
        <li class="right">
            <a href="mail.html" title="Mailイメージセットアップ手順書"
               accesskey="N">next</a> |
        </li>
        <li class="right">
            <a href="deploy.html" title="Deployイメージセットアップ手順書"
               accesskey="P">previous</a> |
        </li>
        <li><a href="index.html">クラウド実践演習 0 documentation</a> &raquo;</li>
    </ul>
</div>

<div class="document">
    <div class="documentwrapper">
        <div class="bodywrapper">
            <div class="body">

                <div class="section" id="lb">
                    <h1>LBイメージセットアップ手順書<a class="headerlink" href="#lb" title="Permalink to this headline">¶</a></h1>
                    <div class="section" id="id1">
                        <h2>はじめに<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
                        <div class="highlight-python">
                            <pre>この手順書は、本演習で使用するLBイメージを作成する手順である。</pre>
                        </div>
                    </div>
                    <div class="section" id="id2">
                        <h2>前提条件<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
                        <ul class="simple">
                            <li>Baseイメージセットアップ手順書に従ってBaseイメージが作成されていること</li>
                        </ul>
                    </div>
                    <div class="section" id="id3">
                        <h2>パッケージのインストールと設定<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a>
                        </h2>
                    </div>
                    <div class="section" id="nginx">
                        <h2>nginx<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h2>
                        <div class="section" id="id4">
                            <h3>インストール<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># apt-get install nginx</span>
</pre>
                                </div>
                            </div>
                        </div>
                        <div class="section" id="id5">
                            <h3>設定<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
                            <div class="highlight-python"><pre># vi /etc/nginx/sites-available/default
# You may add here your
# server {
#       ...
# }
# statements for each of your virtual hosts to this file

##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# http://wiki.nginx.org/Pitfalls
# http://wiki.nginx.org/QuickStart
# http://wiki.nginx.org/Configuration
#
# Generally, you will want to move this file somewhere, and start with a clean
# file but keep this around for reference. Or just disable in sites-enabled.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more    detailed examples.
##
#upstream webcluster {
#   server 10.3.9.7;
#}

server {
        #listen   80; ## listen for ipv4; this line is default and implied
        #listen   [::]:80 default ipv6only=on; ## listen for ipv6

        root /usr/share/nginx/www;
        index index.html index.htm;

        # Make site accessible from http://localhost/
        server_name localhost;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to index.html
                try_files $uri $uri/ /index.html;
                #proxy_pass http://webcluster;
        }

        location /doc {
                root /usr/share;
                autoindex on;
                allow 127.0.0.1;
                deny all;
        }

        location /images {
                root /usr/share;
                autoindex off;
        }

        #error_page 404 /404.html;

        # redirect server error pages to the static page /50x.html
        #
        #error_page 500 502 503 504 /50x.html;
        #location = /50x.html {
        #       root /usr/share/nginx/www;
        #}

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #       proxy_pass http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #       fastcgi_pass 127.0.0.1:9000;
        #       fastcgi_index index.php;
        #       include fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #       deny all;
        #}
}</pre>
                            </div>
                        </div>
                    </div>
                    <div class="section" id="puppet">
                        <h2>puppet<a class="headerlink" href="#puppet" title="Permalink to this headline">¶</a></h2>
                        <div class="section" id="id6">
                            <h3>設定<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
                            <p>puppet agentのプロセスを起動できるようにする</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># vi /etc/default puppet</span>
<span class="n">START</span><span class="o">=</span><span class="n">yes</span>
</pre>
                                </div>
                            </div>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># rm -rf /var/lib/puppt/ssl</span>
</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="section" id="id7">
                        <h2>サービスの無効化<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
                        <div class="section" id="id8">
                            <h3>設定<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
                            <p>不必要なサービスを無効化する</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># /etc/init.d/puppetmaster stop</span>
<span class="c"># /etc/init.d/stompserver stop</span>
<span class="c"># /etc/init.d/mcollective stop</span>
</pre>
                                </div>
                            </div>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># update-rc.d -f puppetmaster remove</span>
<span class="c"># update-rc.d -f puppet remove</span>
<span class="c"># update-rc.d -f mcollective remove</span>
<span class="c"># update-rc.d -f stompserver remove</span>
</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="section" id="startup">
                        <h2>　startupスクリプトの設定<a class="headerlink" href="#startup"
                                               title="Permalink to this headline">¶</a></h2>
                    </div>
                    <div class="section" id="rc-local">
                        <h2>rc.local<a class="headerlink" href="#rc-local" title="Permalink to this headline">¶</a></h2>
                        <div class="section" id="id9">
                            <h3>設定<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
                            <div class="highlight-python"><pre># vi /etc/rc.local
/root/work/setup/startup.sh lb</pre>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
    <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
                <li><a class="reference internal" href="#">LBイメージセットアップ手順書</a>
                    <ul>
                        <li><a class="reference internal" href="#id1">はじめに</a></li>
                        <li><a class="reference internal" href="#id2">前提条件</a></li>
                        <li><a class="reference internal" href="#id3">パッケージのインストールと設定</a></li>
                        <li><a class="reference internal" href="#nginx">nginx</a>
                            <ul>
                                <li><a class="reference internal" href="#id4">インストール</a></li>
                                <li><a class="reference internal" href="#id5">設定</a></li>
                            </ul>
                        </li>
                        <li><a class="reference internal" href="#puppet">puppet</a>
                            <ul>
                                <li><a class="reference internal" href="#id6">設定</a></li>
                            </ul>
                        </li>
                        <li><a class="reference internal" href="#id7">サービスの無効化</a>
                            <ul>
                                <li><a class="reference internal" href="#id8">設定</a></li>
                            </ul>
                        </li>
                        <li><a class="reference internal" href="#startup">　startupスクリプトの設定</a></li>
                        <li><a class="reference internal" href="#rc-local">rc.local</a>
                            <ul>
                                <li><a class="reference internal" href="#id9">設定</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="deploy.html"
                                  title="previous chapter">Deployイメージセットアップ手順書</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="mail.html"
                                  title="next chapter">Mailイメージセットアップ手順書</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
                <li><a href="_sources/lb.txt"
                       rel="nofollow">Show Source</a></li>
            </ul>
            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="search.html" method="get">
                    <input type="text" name="q"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>
            </div>
            <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
    </div>
    <div class="clearer"></div>
</div>
<div class="related">
    <h3>Navigation</h3>
    <ul>
        <li class="right" style="margin-right: 10px">
            <a href="genindex.html" title="General Index"
            >index</a></li>
        <li class="right">
            <a href="mail.html" title="Mailイメージセットアップ手順書"
            >next</a> |
        </li>
        <li class="right">
            <a href="deploy.html" title="Deployイメージセットアップ手順書"
            >previous</a> |
        </li>
        <li><a href="index.html">クラウド実践演習 0 documentation</a> &raquo;</li>
    </ul>
</div>
<div class="footer">
    &copy; Copyright 2012, Nii.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
</div>
</body>
</html>